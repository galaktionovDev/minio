# üì¶ MinIO ‚Äî –û–±—ä–µ–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

## üîç –û–ø–∏—Å–∞–Ω–∏–µ

–†–æ–ª—å MinIO –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫—É –æ–±—ä–µ–∫—Ç–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ MinIO
–†–µ—à–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:

- –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —É—Å—Ç–∞–Ω–æ–≤–∫—É MinIO Server –∏ MinIO Client (mcli);
- –ø–æ–¥–≥–æ—Ç–æ–≤–∫—É –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∏—Å–∫–æ–≤ XFS;
- –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π –∏ —Å–µ—Ä–≤–∏—Å–æ–≤ systemd;
- —ç–∫—Å–ø–æ—Ä—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–ª—è UI;
- –æ—Ç–¥–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –±–∞–∫–µ—Ç–æ–≤.

---

## ‚öôÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
      ‚îú‚îÄ‚îÄ defaults/
      ‚îÇ   ‚îî‚îÄ‚îÄ main.yml             
      ‚îú‚îÄ‚îÄ vars/
      ‚îÇ   ‚îî‚îÄ‚îÄ main.yml             
      ‚îú‚îÄ‚îÄ tasks/
      ‚îÇ   ‚îú‚îÄ‚îÄ main.yml             
      ‚îÇ   ‚îú‚îÄ‚îÄ install_server.yml    
      ‚îÇ   ‚îú‚îÄ‚îÄ install_client.yml   
      ‚îÇ   ‚îú‚îÄ‚îÄ prepare_disks.yml     
      ‚îÇ   ‚îú‚îÄ‚îÄ prepare_single_disk.yml
      ‚îÇ   ‚îú‚îÄ‚îÄ configure_server.yml   
      ‚îÇ   ‚îú‚îÄ‚îÄ create_minio_buckets.yml 
      ‚îÇ   ‚îî‚îÄ‚îÄ delete_minio_bucket.yml  
      ‚îú‚îÄ‚îÄ handlers/
      ‚îÇ   ‚îî‚îÄ‚îÄ main.yml              
      ‚îú‚îÄ‚îÄ templates/
      ‚îÇ   ‚îú‚îÄ‚îÄ minio.env.j2          
      ‚îÇ   ‚îú‚îÄ‚îÄ minio.service.j2      
      ‚îÇ   ‚îî‚îÄ‚îÄ minio_policy.json.j2
      ‚îú‚îÄ‚îÄ minio_create_bucket.yml 
      ‚îú‚îÄ‚îÄ minio_delete_bucket.yml 
      ‚îú‚îÄ‚îÄ minio_standalone.yml   
      ‚îî‚îÄ‚îÄ README.md                  
```

---

## üß© –û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è              | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                       | –ü—Ä–∏–º–µ—Ä       |
|-------------------------|---------------------------------|-------------|
| minio_install_server     | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Å–µ—Ä–≤–µ—Ä MinIO       | true        |
| minio_install_client     | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç MinIO       | true        |
| minio_root_user          | –ò–º—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞               | admin       |
| minio_root_password      | –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞            | secret123   |
| minio_server_port        | –ü–æ—Ä—Ç API MinIO                   | 9000        |
| minio_console_port       | –ü–æ—Ä—Ç –≤–µ–±-–∫–æ–Ω—Å–æ–ª–∏                 | 9001        |
| minio_server_deb_url     | URL deb-–ø–∞–∫–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞           | `<Nexus URL>` |
| minio_client_deb_url     | URL deb-–ø–∞–∫–µ—Ç–∞ –∫–ª–∏–µ–Ω—Ç–∞           | `<Nexus URL>` |
| minio_extra_disks        | –°–ø–∏—Å–æ–∫ –¥–∏—Å–∫–æ–≤ –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è | —Å–º. –Ω–∏–∂–µ |

---
## üß∞ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

| ‚Ññ | –ü—Ä–æ–≤–µ—Ä–∫–∞ | –ö–æ–º–∞–Ω–¥—ã | ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç |
|--:|-----------|----------|------------------------|
| 1 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–ª—É–∂–±—ã** | `sudo systemctl status minio`<br>`sudo systemctl is-enabled minio` | –°—Ç–∞—Ç—É—Å `active (running)` –∏ `enabled`. |
| 2 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–Ω–∞—Ä–Ω–∏–∫–æ–≤ –∏ –ø—É—Ç–µ–π** | `which minio`<br>`which mc`<br>  `which mcli`<br>`ls -l /usr/local/bin/minio* && ls -l /usr/local/bin/mc*` | –ë–∏–Ω–∞—Ä–Ω–∏–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∏ –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ. |
| 3 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–∞—Ç–∞–ª–æ–≥–æ–≤** | `sudo ls -l /app/disk*`<br>`ls -ld /etc/minio/ && ls -ld /etc/systemd/system/minio.service` | –í—Å–µ –¥–∏—Å–∫–∏ `/app/disk*` –ø—Ä–∏–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã, `/etc/minio` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã. |
| 4 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å—Ä–µ–¥—ã MinIO** | `sudo cat /etc/minio/minio.conf` | –°–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:<br> `MINIO_VOLUMES="/app/disk*"`<br>`MINIO_ROOT_USER=<user>`<br>`MINIO_ROOT_PASSWORD=<password>`|
| 5 | **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ API** | `curl -I http://<IP-addr>>:9000/minio/health/live` | HTTP-–∫–æ–¥ –æ—Ç–≤–µ—Ç–∞ `200`. |


---

## üßæ –î–µ–π—Å—Ç–≤–∏—è

| –î–µ–π—Å—Ç–≤–∏–µ       | –ü–ª–µ–π–±—É–∫                        | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                      |
|----------------|--------------------------------|--------------------------------|
| –°–æ–∑–¥–∞—Ç—å –±–∞–∫–µ—Ç   | `tasks/create_minio_buckets.yml` | –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–∞–∫–µ—Ç–∞ |
| –£–¥–∞–ª–∏—Ç—å –±–∞–∫–µ—Ç   | `tasks/delete_minio_bucket.yml`  | –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –±–∞–∫–µ—Ç–∞    |

---

## üß± –≠–∫—Å–ø–æ—Ä—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

–†–æ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –¥–ª—è UI:

```yaml
set_stats:
  data:
    connection_url: "http://<host>:9000"
    console_url:    "http://<host>:9001"
    access_key:     "<minio_root_user>"
```

–ü–∞—Ä–æ–ª–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã –≤ –≤—ã–≤–æ–¥ –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç.

---